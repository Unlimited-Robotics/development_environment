#!/usr/bin/python3
import subprocess
import argparse

from robotdevenv.component import RobotDevComponent as Component
from robotdevenv.robot import RobotDevRobot as Robot
from robotdevenv.docker import RobotDevDockerHandler as DockerHandler
from robotdevenv.docker import BuildImageType


def pull_command():

    parser = argparse.ArgumentParser()
    robot = Robot(parser=parser)
    component = Component(parser=parser, robot=robot, checks=False)
    docker_handler = DockerHandler(component, robot)

    parser.add_argument('-v', '--version', type=str, required=True)

    args = dict(parser.parse_known_args()[0]._get_kwargs())

    print()
    print('🤖🤖 UR ROBOT DEVELOPMENT ENVIRONMENT 🤖🤖')
    print('  ⏬ Pull docker images ⏬')
    print()
    print(f'📦📦  Component: {component.full_name}')
    print(f'🤖🤖      Robot: {robot.name}')
    print()

    docker_handler.pull_images(version=args['version'])


if __name__ == "__main__":
    pull_command()
